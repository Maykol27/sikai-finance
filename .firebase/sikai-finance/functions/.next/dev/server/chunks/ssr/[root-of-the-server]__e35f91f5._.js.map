{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mayko/.gemini/antigravity/scratch/sikai-finance/utils/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\r\n\r\nexport function createClient() {\r\n    return createBrowserClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,SAAS;IACZ,OAAO,IAAA,iMAAmB;AAI9B"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mayko/.gemini/antigravity/scratch/sikai-finance/components/CategoryManager.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { createClient } from \"@/utils/supabase/client\";\r\nimport { Plus, Trash2, ChevronRight, ChevronDown, Folder, Save, X, Sparkles } from \"lucide-react\";\r\nimport { clsx } from \"clsx\";\r\n\r\ntype Category = {\r\n    id: string;\r\n    name: string;\r\n    type: 'income' | 'expense';\r\n    parent_id: string | null;\r\n    subcategories?: Category[];\r\n};\r\n\r\nexport default function CategoryManager({ userId, isOpen, onClose }: { userId: string, isOpen: boolean, onClose: () => void }) {\r\n    const [categories, setCategories] = useState<Category[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [newCatName, setNewCatName] = useState(\"\");\r\n    const [selectedParent, setSelectedParent] = useState<string | null>(null);\r\n    const [expanded, setExpanded] = useState<Record<string, boolean>>({});\r\n\r\n    const supabase = createClient();\r\n\r\n    useEffect(() => {\r\n        if (isOpen) fetchCategories();\r\n    }, [isOpen]);\r\n\r\n    const fetchCategories = async () => {\r\n        setLoading(true);\r\n        const { data } = await supabase.from('categories').select('*').eq('user_id', userId).order('name');\r\n\r\n        if (data) {\r\n            const tree: Category[] = [];\r\n            const map: Record<string, Category> = {};\r\n\r\n            // Initialize map with subcategories array\r\n            data.forEach((c: any) => {\r\n                map[c.id] = { ...c, subcategories: [] };\r\n            });\r\n\r\n            // Build tree\r\n            data.forEach((c: any) => {\r\n                if (c.parent_id && map[c.parent_id]) {\r\n                    map[c.parent_id].subcategories?.push(map[c.id]);\r\n                } else if (!c.parent_id) { // Only add to root if no parent\r\n                    tree.push(map[c.id]);\r\n                }\r\n            });\r\n\r\n            setCategories(tree);\r\n\r\n            // Auto-expand all for better visibility initially\r\n            const initialExpanded: Record<string, boolean> = {};\r\n            tree.forEach(c => initialExpanded[c.id] = true);\r\n            setExpanded(prev => ({ ...prev, ...initialExpanded }));\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleAdd = async () => {\r\n        if (!newCatName.trim()) return;\r\n\r\n        const { error } = await supabase.from('categories').insert({\r\n            user_id: userId,\r\n            name: newCatName,\r\n            type: 'expense',\r\n            parent_id: selectedParent\r\n        });\r\n\r\n        if (!error) {\r\n            setNewCatName(\"\");\r\n            fetchCategories();\r\n        }\r\n    };\r\n\r\n    const seedDefaults = async () => {\r\n        setLoading(true);\r\n        const defaults = [\r\n            { name: \"Ingresos\", type: \"income\", subs: [\"Salario\", \"Freelance\", \"Inversiones\"] },\r\n            { name: \"Vivienda\", type: \"expense\", subs: [\"Alquiler\", \"Servicios\", \"Mantenimiento\"] },\r\n            { name: \"Comida\", type: \"expense\", subs: [\"Supermercado\", \"Restaurantes\", \"Delivery\"] },\r\n            { name: \"Transporte\", type: \"expense\", subs: [\"Gasolina\", \"Transporte Público\", \"Mantenimiento Auto\"] },\r\n            { name: \"Ocio\", type: \"expense\", subs: [\"Suscripciones (Netflix/Spotify)\", \"Cine\", \"Salidas\"] },\r\n            { name: \"Salud\", type: \"expense\", subs: [\"Farmacia\", \"Consultas\", \"Seguro\"] },\r\n        ];\r\n\r\n        for (const def of defaults) {\r\n            // Insert Parent\r\n            const { data: parent, error } = await supabase.from('categories').insert({\r\n                user_id: userId,\r\n                name: def.name,\r\n                type: def.type\r\n            }).select().single();\r\n\r\n            if (parent && !error) {\r\n                // Insert Subcategories\r\n                const subsToInsert = def.subs.map(subName => ({\r\n                    user_id: userId,\r\n                    name: subName,\r\n                    type: def.type,\r\n                    parent_id: parent.id\r\n                }));\r\n                await supabase.from('categories').insert(subsToInsert);\r\n            }\r\n        }\r\n        await fetchCategories();\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (confirm(\"¿Eliminar esta categoría?\")) {\r\n            await supabase.from('categories').delete().eq('id', id);\r\n            fetchCategories();\r\n        }\r\n    };\r\n\r\n    const toggleExpand = (id: string) => {\r\n        setExpanded(prev => ({ ...prev, [id]: !prev[id] }));\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n            <div className=\"absolute inset-0 bg-black/80 backdrop-blur-sm\" onClick={onClose} />\r\n            <div className=\"glass-card w-full max-w-lg p-6 relative animate-in fade-in zoom-in duration-300 border-glow flex flex-col max-h-[85vh]\">\r\n                <div className=\"flex justify-between items-center mb-6 shrink-0\">\r\n                    <h2 className=\"text-xl font-headline font-bold text-white flex items-center gap-2\">\r\n                        <Folder className=\"text-primary-cyan\" /> Gestión de Categorías\r\n                    </h2>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-white/10 rounded-full text-muted-foreground hover:text-white transition\">\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Add New */}\r\n                <div className=\"flex flex-col gap-3 mb-6 p-4 rounded-xl bg-white/5 border border-white/10 shrink-0\">\r\n                    <div className=\"flex gap-2\">\r\n                        <input\r\n                            value={newCatName}\r\n                            onChange={e => setNewCatName(e.target.value)}\r\n                            placeholder=\"Nombre de categoría...\"\r\n                            className=\"flex-1 bg-black/40 border border-white/10 rounded-lg px-4 py-2 text-sm focus:border-primary-cyan focus:ring-1 focus:ring-primary-cyan outline-none text-white placeholder:text-muted-foreground\"\r\n                        />\r\n                        <button onClick={handleAdd} disabled={!newCatName.trim()} className=\"bg-primary hover:bg-primary-hover text-white rounded-lg px-4 flex items-center justify-center transition-all shadow-neon disabled:opacity-50\">\r\n                            <Plus />\r\n                        </button>\r\n                    </div>\r\n\r\n                    <select\r\n                        value={selectedParent || \"\"}\r\n                        onChange={e => setSelectedParent(e.target.value === \"\" ? null : e.target.value)}\r\n                        className=\"w-full bg-black/40 border border-white/10 rounded-lg px-4 py-2 text-sm text-muted-foreground outline-none\"\r\n                    >\r\n                        <option value=\"\">-- Sin categoría padre (Raíz) --</option>\r\n                        {categories.map(c => (\r\n                            <option key={c.id} value={c.id}>{c.name}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n\r\n                {/* List */}\r\n                <div className=\"flex-1 overflow-y-auto pr-2 custom-scrollbar space-y-2 min-h-0\">\r\n                    {loading ? (\r\n                        <p className=\"text-center text-muted-foreground py-4\">Cargando...</p>\r\n                    ) : categories.length === 0 ? (\r\n                        <div className=\"text-center py-8 space-y-4\">\r\n                            <p className=\"text-muted-foreground\">No hay categorías aun.</p>\r\n                            <button onClick={seedDefaults} className=\"px-4 py-2 bg-primary-cyan/20 text-primary-cyan rounded-full border border-primary-cyan/50 hover:bg-primary-cyan/30 flex items-center gap-2 mx-auto transition-all\">\r\n                                <Sparkles size={16} /> Crear Sugeridas\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        categories.map(cat => (\r\n                            <div key={cat.id} className=\"space-y-1\">\r\n                                <div className=\"flex items-center justify-between p-3 rounded-lg bg-card hover:bg-white/5 border border-transparent hover:border-white/10 transition group\">\r\n                                    <div className=\"flex items-center gap-2 text-white flex-1\">\r\n                                        {cat.subcategories && cat.subcategories.length > 0 ? (\r\n                                            <button onClick={() => toggleExpand(cat.id)} className=\"text-muted-foreground hover:text-white p-1\">\r\n                                                {expanded[cat.id] ? <ChevronDown size={16} /> : <ChevronRight size={16} />}\r\n                                            </button>\r\n                                        ) : (\r\n                                            <span className=\"w-6\"></span>\r\n                                        )}\r\n                                        <span className=\"font-medium truncate\">{cat.name}</span>\r\n                                    </div>\r\n                                    <button onClick={() => handleDelete(cat.id)} className=\"opacity-0 group-hover:opacity-100 text-red-500 hover:bg-red-500/10 p-2 rounded transition\">\r\n                                        <Trash2 size={16} />\r\n                                    </button>\r\n                                </div>\r\n                                {/* Subcategories */}\r\n                                {expanded[cat.id] && cat.subcategories?.map(sub => (\r\n                                    <div key={sub.id} className=\"ml-10 flex items-center justify-between p-2 rounded-lg bg-white/5 border border-white/5 text-sm group-sub\">\r\n                                        <span className=\"text-muted-foreground truncate\">{sub.name}</span>\r\n                                        <button onClick={() => handleDelete(sub.id)} className=\"opacity-0 group-sub-hover:opacity-100 text-red-500 hover:text-red-400 transition p-1\">\r\n                                            <Trash2 size={14} />\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mayko/.gemini/antigravity/scratch/sikai-finance/components/BudgetManager.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { createClient } from \"@/utils/supabase/client\";\r\nimport { Target, Save, X } from \"lucide-react\";\r\n\r\ntype Budget = {\r\n    id?: string;\r\n    category_id: string;\r\n    amount: number;\r\n    month: string; // YYYY-MM-01\r\n};\r\n\r\nexport default function BudgetManager({ userId, isOpen, onClose }: { userId: string, isOpen: boolean, onClose: () => void }) {\r\n    const [categories, setCategories] = useState<any[]>([]);\r\n    const [budgets, setBudgets] = useState<Record<string, number>>({});\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Default to current month\r\n    const currentMonth = new Date().toISOString().slice(0, 7) + '-01';\r\n\r\n    const supabase = createClient();\r\n\r\n    useEffect(() => {\r\n        if (isOpen) loadData();\r\n    }, [isOpen]);\r\n\r\n    const loadData = async () => {\r\n        setLoading(true);\r\n        const { data: catData } = await supabase.from('categories').select('*').eq('user_id', userId).order('name');\r\n        setCategories(catData || []);\r\n\r\n        const { data: budData } = await supabase.from('budgets').select('*').eq('user_id', userId).eq('month', currentMonth);\r\n        const budgetMap: Record<string, number> = {};\r\n        budData?.forEach((b: any) => {\r\n            budgetMap[b.category_id] = b.amount;\r\n        });\r\n        setBudgets(budgetMap);\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleSave = async (categoryId: string, amount: string) => {\r\n        const val = parseFloat(amount);\r\n        if (isNaN(val)) return;\r\n\r\n        // Optimistic update\r\n        setBudgets(prev => ({ ...prev, [categoryId]: val }));\r\n\r\n        // Upsert logic (need manual check since no unique constraint on (user_id, category_id, month) maybe?)\r\n        // Assuming unique constraint exists or we handle it. \r\n        // Ideally schema should have UNIQUE(user_id, category_id, month).\r\n        // Let's verify existing first or use upsert.\r\n\r\n        const { data: existing } = await supabase.from('budgets').select('id').eq('user_id', userId).eq('category_id', categoryId).eq('month', currentMonth).maybeSingle();\r\n\r\n        if (existing) {\r\n            await supabase.from('budgets').update({ amount: val }).eq('id', existing.id);\r\n        } else {\r\n            await supabase.from('budgets').insert({\r\n                user_id: userId,\r\n                category_id: categoryId,\r\n                amount: val,\r\n                month: currentMonth\r\n            });\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n            <div className=\"absolute inset-0 bg-black/80 backdrop-blur-sm\" onClick={onClose} />\r\n            <div className=\"glass-card w-full max-w-2xl p-8 relative animate-in fade-in zoom-in duration-300 border-glow h-[80vh] flex flex-col\">\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <h2 className=\"text-xl font-headline font-bold text-white flex items-center gap-2\">\r\n                        <Target className=\"text-pink-500\" /> Presupuesto Mensual\r\n                    </h2>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-white/10 rounded-full text-muted-foreground hover:text-white transition\">\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                <p className=\"text-muted-foreground mb-6\">Planifica tu mes de <span className=\"text-white font-mono\">{currentMonth.slice(0, 7)}</span>.</p>\r\n\r\n                <div className=\"overflow-y-auto flex-1 pr-2 custom-scrollbar space-y-8 min-h-[300px]\">\r\n                    {loading ? (\r\n                        <p className=\"text-center py-10\">Cargando...</p>\r\n                    ) : categories.length === 0 ? (\r\n                        <div className=\"flex flex-col items-center justify-center h-full text-center space-y-4\">\r\n                            <p className=\"text-muted-foreground max-w-xs\">No tienes categorías creadas.</p>\r\n                            <button onClick={onClose} className=\"text-primary hover:text-primary-cyan underline underline-offset-4\">\r\n                                Ir a Gestión de Categorías\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            {/* Income Section */}\r\n                            <div className=\"space-y-3\">\r\n                                <h3 className=\"text-sm font-bold text-primary-cyan uppercase tracking-wider flex items-center gap-2\">\r\n                                    <span className=\"w-2 h-2 rounded-full bg-primary-cyan\"></span> Metas de Ingresos\r\n                                </h3>\r\n                                {categories.filter(c => c.type === 'income').map(cat => (\r\n                                    <div key={cat.id} className=\"flex items-center justify-between bg-white/5 p-3 rounded-lg border border-primary-cyan/20 hover:border-primary-cyan/50 transition-colors\">\r\n                                        <span className=\"font-medium text-white\">{cat.name}</span>\r\n                                        <div className=\"relative w-32\">\r\n                                            <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-primary-cyan\">$</span>\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                value={budgets[cat.id] || ''}\r\n                                                onChange={(e) => handleSave(cat.id, e.target.value)}\r\n                                                placeholder=\"0\"\r\n                                                className=\"w-full bg-black/40 border border-primary-cyan/30 rounded-lg py-1.5 pl-7 pr-2 font-mono text-right focus:border-primary-cyan outline-none text-white focus:shadow-[0_0_10px_rgba(38,216,196,0.2)]\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {categories.filter(c => c.type === 'income').length === 0 && (\r\n                                    <p className=\"text-xs text-muted-foreground italic pl-4\">No hay categorías de ingreso.</p>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Expense Section */}\r\n                            <div className=\"space-y-3\">\r\n                                <h3 className=\"text-sm font-bold text-pink-500 uppercase tracking-wider flex items-center gap-2\">\r\n                                    <span className=\"w-2 h-2 rounded-full bg-pink-500\"></span> Límites de Gastos\r\n                                </h3>\r\n                                {categories.filter(c => c.type === 'expense').map(cat => (\r\n                                    <div key={cat.id} className=\"flex items-center justify-between bg-white/5 p-3 rounded-lg border border-white/5 hover:border-pink-500/30 transition-colors group\">\r\n                                        <div className=\"flex flex-col\">\r\n                                            <span className=\"font-medium text-foreground group-hover:text-white transition-colors\">{cat.name}</span>\r\n                                            {/* Show subcategory indicator if needed, but for budget usually we budget by leaf or main category. For now simple list. */}\r\n                                        </div>\r\n                                        <div className=\"relative w-32\">\r\n                                            <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\">$</span>\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                value={budgets[cat.id] || ''}\r\n                                                onChange={(e) => handleSave(cat.id, e.target.value)}\r\n                                                placeholder=\"0\"\r\n                                                className=\"w-full bg-black/30 border border-white/10 rounded-lg py-1.5 pl-7 pr-2 font-mono text-right focus:border-pink-500 outline-none text-white transition-all focus:shadow-[0_0_10px_rgba(236,72,153,0.3)]\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 845, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mayko/.gemini/antigravity/scratch/sikai-finance/components/Dashboard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { PieChart, Pie, Cell, ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip, CartesianGrid } from \"recharts\";\r\nimport { ArrowUpRight, ArrowDownRight, Wallet, Target, Layers, Calendar } from \"lucide-react\";\r\nimport { createClient } from \"@/utils/supabase/client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { clsx } from \"clsx\";\r\nimport CategoryManager from \"./CategoryManager\";\r\nimport BudgetManager from \"./BudgetManager\";\r\n\r\nexport default function Dashboard({ userId }: { userId: string }) {\r\n    const [balance, setBalance] = useState(0);\r\n    const [income, setIncome] = useState(0);\r\n    const [expense, setExpense] = useState(0);\r\n    const [loading, setLoading] = useState(true);\r\n    const [timeFilter, setTimeFilter] = useState<'month' | 'year'>('month');\r\n\r\n    // Modal States\r\n    const [showCategories, setShowCategories] = useState(false);\r\n    const [showBudget, setShowBudget] = useState(false);\r\n\r\n    // Datos dummy mejorados para demo Tech\r\n    const [chartData, setChartData] = useState([\r\n        { name: \"Gastos\", value: 1200 },\r\n        { name: \"Disponible\", value: 3000 },\r\n    ]);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            const supabase = createClient();\r\n\r\n            // Simulación de filtro por fecha (en implementación real usaríamos ranges)\r\n            const { data: transactions } = await supabase\r\n                .from('transactions')\r\n                .select('*')\r\n                .eq('user_id', userId);\r\n\r\n            if (transactions) {\r\n                let inc = 0;\r\n                let exp = 0;\r\n\r\n                transactions.forEach(t => {\r\n                    // Lógica temporal simple: Asumimos todo es Gasto por falta de campo Type en primera versión\r\n                    // En V2 DB update deberíamos arreglar esto, pero por fidelidad al UI request primero:\r\n                    exp += Number(t.amount);\r\n                });\r\n\r\n                // Mock Income para que se vea bien el grafico\r\n                inc = 5000;\r\n\r\n                setIncome(inc);\r\n                setExpense(exp);\r\n                setBalance(inc - exp);\r\n            }\r\n            setLoading(false);\r\n        };\r\n        fetchData();\r\n    }, [userId, timeFilter]);\r\n\r\n    const COLORS = [\"#1a88ff\", \"#261c2c\"]; // Tech Blue vs Dark\r\n\r\n    return (\r\n        <div className=\"p-4 space-y-8 pb-32\">\r\n\r\n            {/* Time Filter Tabs */}\r\n            <div className=\"flex justify-center mb-6\">\r\n                <div className=\"bg-muted/30 p-1 rounded-full border border-glass-border backdrop-blur-md flex\">\r\n                    <button\r\n                        onClick={() => setTimeFilter('month')}\r\n                        className={clsx(\"px-6 py-2 rounded-full text-sm font-medium transition-all duration-300\", timeFilter === 'month' ? \"bg-primary text-white shadow-neon\" : \"text-muted-foreground hover:text-white\")}\r\n                    >\r\n                        Mensual\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setTimeFilter('year')}\r\n                        className={clsx(\"px-6 py-2 rounded-full text-sm font-medium transition-all duration-300\", timeFilter === 'year' ? \"bg-primary text-white shadow-neon\" : \"text-muted-foreground hover:text-white\")}\r\n                    >\r\n                        Anual\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Hero Stats */}\r\n            <section className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                {/* Main Balance */}\r\n                <div className=\"glass-card p-8 relative overflow-hidden group\">\r\n                    <div className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity\">\r\n                        <Wallet size={120} />\r\n                    </div>\r\n                    <div className=\"relative z-10\">\r\n                        <h3 className=\"text-muted-foreground font-medium flex items-center gap-2 mb-2\">\r\n                            <span className=\"w-2 h-2 rounded-full bg-primary-cyan animate-pulse\"></span>\r\n                            Saldo Disponible\r\n                        </h3>\r\n                        <p className=\"text-5xl font-bold font-mono text-white text-glow tracking-tighter\">\r\n                            {loading ? \"...\" : `$ ${balance.toLocaleString()}`}\r\n                        </p>\r\n                        <div className=\"mt-4 flex gap-2\">\r\n                            <span className=\"text-xs bg-primary/20 text-primary px-2 py-1 rounded border border-primary/20\">\r\n                                +12% vs mes anterior\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Income */}\r\n                <div className=\"glass-card p-6 flex flex-col justify-center\">\r\n                    <p className=\"text-muted-foreground text-sm flex items-center gap-2 mb-1\">\r\n                        <ArrowUpRight size={16} className=\"text-primary-cyan\" /> Ingresos\r\n                    </p>\r\n                    <p className=\"text-3xl font-bold font-mono text-white neon-text-cyan\">\r\n                        $ {income.toLocaleString()}\r\n                    </p>\r\n                    <div className=\"w-full bg-muted/50 h-1 mt-4 rounded-full overflow-hidden\">\r\n                        <div className=\"bg-primary-cyan h-full w-[70%] shadow-[0_0_10px_#26d8c4]\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Expense */}\r\n                <div className=\"glass-card p-6 flex flex-col justify-center\">\r\n                    <p className=\"text-muted-foreground text-sm flex items-center gap-2 mb-1\">\r\n                        <ArrowDownRight size={16} className=\"text-pink-500\" /> Gastos\r\n                    </p>\r\n                    <p className=\"text-3xl font-bold font-mono text-white\" style={{ textShadow: \"0 0 10px rgba(236, 72, 153, 0.5)\" }}>\r\n                        $ {expense.toLocaleString()}\r\n                    </p>\r\n                    <div className=\"w-full bg-muted/50 h-1 mt-4 rounded-full overflow-hidden\">\r\n                        <div className=\"bg-pink-500 h-full w-[45%] shadow-[0_0_10px_#ec4899]\"></div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* Analytics Grid */}\r\n            <section className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n\r\n                {/* Budget Circle */}\r\n                <div onClick={() => setShowBudget(true)} className=\"glass-card p-6 lg:col-span-1 flex flex-col items-center justify-center relative cursor-pointer hover:border-pink-500/50 transition-colors\">\r\n                    <h3 className=\"text-lg font-headline font-semibold mb-2 w-full text-left flex items-center gap-2\">\r\n                        <Target size={18} className=\"text-primary\" /> Ejecución Presupuestal\r\n                    </h3>\r\n                    <div className=\"h-64 w-full relative\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <PieChart>\r\n                                <Pie\r\n                                    data={chartData}\r\n                                    cx=\"50%\"\r\n                                    cy=\"50%\"\r\n                                    innerRadius={70}\r\n                                    outerRadius={90}\r\n                                    paddingAngle={2}\r\n                                    dataKey=\"value\"\r\n                                    stroke=\"none\"\r\n                                >\r\n                                    <Cell key=\"cell-0\" fill=\"#ec4899\" style={{ filter: \"drop-shadow(0px 0px 5px rgba(236, 72, 153, 0.5))\" }} />\r\n                                    <Cell key=\"cell-1\" fill=\"#1a88ff\" style={{ opacity: 0.2 }} />\r\n                                </Pie>\r\n                            </PieChart>\r\n                        </ResponsiveContainer>\r\n                        <div className=\"absolute inset-0 flex items-center justify-center flex-col pointer-events-none\">\r\n                            <span className=\"text-4xl font-bold font-mono text-white\">40%</span>\r\n                            <span className=\"text-xs text-muted-foreground\">Gastado</span>\r\n                        </div>\r\n                    </div>\r\n                    <span className=\"absolute bottom-4 text-xs text-pink-500 animate-pulse\">Click para gestionar</span>\r\n                </div>\r\n\r\n                {/* Cash Flow Bar Chart */}\r\n                <div className=\"glass-card p-6 lg:col-span-2\">\r\n                    <h3 className=\"text-lg font-headline font-semibold mb-6 flex items-center gap-2\">\r\n                        <Calendar size={18} className=\"text-primary\" /> Flujo Financiero\r\n                    </h3>\r\n                    <div className=\"h-64 cursor-crosshair\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <BarChart data={[\r\n                                { name: \"S1\", inc: 4000, exp: 2400 },\r\n                                { name: \"S2\", inc: 3000, exp: 1398 },\r\n                                { name: \"S3\", inc: 2000, exp: 9800 },\r\n                                { name: \"S4\", inc: 2780, exp: 3908 },\r\n                            ]}>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"rgba(255,255,255,0.05)\" />\r\n                                <XAxis dataKey=\"name\" stroke=\"#4b5563\" fontSize={12} tickLine={false} axisLine={false} />\r\n                                <YAxis stroke=\"#4b5563\" fontSize={12} tickLine={false} axisLine={false} tickFormatter={(value) => `$${value / 1000}k`} />\r\n                                <Tooltip\r\n                                    contentStyle={{\r\n                                        backgroundColor: 'rgba(22, 24, 29, 0.9)',\r\n                                        borderColor: 'rgba(26, 136, 255, 0.2)',\r\n                                        backdropFilter: 'blur(10px)',\r\n                                        borderRadius: '12px',\r\n                                        boxShadow: '0 0 15px rgba(0,0,0,0.5)'\r\n                                    }}\r\n                                    itemStyle={{ color: '#fff', fontFamily: 'monospace' }}\r\n                                    cursor={{ fill: 'rgba(255,255,255,0.03)' }}\r\n                                />\r\n                                <Bar dataKey=\"inc\" fill=\"#26d8c4\" radius={[4, 4, 0, 0]} maxBarSize={40} />\r\n                                <Bar dataKey=\"exp\" fill=\"#ec4899\" radius={[4, 4, 0, 0]} maxBarSize={40} />\r\n                            </BarChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* Feature Access Grid */}\r\n            <section className=\"grid grid-cols-2 gap-4\">\r\n                <button onClick={() => setShowBudget(true)} className=\"glass-card p-4 flex flex-col items-center justify-center gap-2 hover:bg-primary/10 group\">\r\n                    <div className=\"p-3 rounded-full bg-primary/10 text-primary group-hover:shadow-neon transition-all\">\r\n                        <Target size={24} />\r\n                    </div>\r\n                    <span className=\"text-sm font-medium\">Nuevo Presupuesto</span>\r\n                </button>\r\n                <button onClick={() => setShowCategories(true)} className=\"glass-card p-4 flex flex-col items-center justify-center gap-2 hover:bg-primary/10 group\">\r\n                    <div className=\"p-3 rounded-full bg-primary/10 text-primary-cyan group-hover:shadow-neon-cyan transition-all\">\r\n                        <Layers size={24} />\r\n                    </div>\r\n                    <span className=\"text-sm font-medium\">Categorías</span>\r\n                </button>\r\n            </section>\r\n\r\n            {/* Modals */}\r\n            <CategoryManager isOpen={showCategories} onClose={() => setShowCategories(false)} userId={userId} />\r\n            <BudgetManager isOpen={showBudget} onClose={() => setShowBudget(false)} userId={userId} />\r\n\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1557, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mayko/.gemini/antigravity/scratch/sikai-finance/components/TransactionForm.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { X, Calendar as CalendarIcon, Save } from \"lucide-react\";\r\nimport { clsx } from \"clsx\";\r\nimport { createClient } from \"@/utils/supabase/client\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function TransactionForm({ isOpen, onClose, userId }: { isOpen: boolean; onClose: () => void; userId: string }) {\r\n    const [type, setType] = useState<\"income\" | \"expense\">(\"expense\");\r\n    const [amount, setAmount] = useState(\"\");\r\n    const [category, setCategory] = useState(\"Sin categoría\");\r\n    const [date, setDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [note, setNote] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const router = useRouter();\r\n    const supabase = createClient();\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        // 1. Get or Create Category (Basic Implementation: Just use ID if storing, but here we simplify)\r\n        // For MVP, we insert raw category name or fetch ID. Let's just mock category ID fetch or insert simple\r\n        // Ideally we should select from existing categories.\r\n        // Let's assume we just insert into 'transactions' now.\r\n\r\n        // NOTE: In a real app we should fetch categories first. \r\n        // For this demo speed, we will assume a generic 'uncategorized' or just insert without FK constraint strictness if possible,\r\n        // BUT we have FK constraints.\r\n        // Solution: We will fetch the 'General' category for the user or create it.\r\n\r\n        // Quick Fix: Create a 'General' category for the user if it doesn't exist.\r\n        const { data: categories } = await supabase.from('categories').select('id').eq('user_id', userId).eq('name', 'General').maybeSingle();\r\n        let categoryId = categories?.id;\r\n\r\n        if (!categoryId) {\r\n            const { data: newCat } = await supabase.from('categories').insert({\r\n                user_id: userId,\r\n                name: 'General',\r\n                type: 'expense'\r\n            }).select().single();\r\n            categoryId = newCat?.id;\r\n        }\r\n\r\n        const { error } = await supabase.from('transactions').insert({\r\n            user_id: userId,\r\n            category_id: categoryId,\r\n            amount: parseFloat(amount),\r\n            date: date,\r\n            note: note,\r\n            // We need to handle type (income/expense) maybe in category or negative amount? \r\n            // Sikai Logic: Expenses are usually positive numbers in DB but categorized as expense. \r\n            // Let's stick to positive and use Type logic in query.\r\n        });\r\n\r\n        if (error) {\r\n            console.error(error);\r\n            alert(\"Error al guardar\");\r\n        } else {\r\n            router.refresh(); // Refresh server components\r\n            onClose();\r\n            setAmount(\"\");\r\n            setNote(\"\");\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex justify-end\">\r\n            <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n            <div className=\"relative w-full max-w-md bg-card h-full p-6 shadow-2xl border-l border-border transform transition-transform animate-in slide-in-from-right duration-300\">\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <h2 className=\"text-xl font-headline font-bold\">Nueva Transacción</h2>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-muted rounded-full\">\r\n                        <X size={24} />\r\n                    </button>\r\n                </div>\r\n\r\n                <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n                    <div className=\"flex bg-muted p-1 rounded-lg\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setType(\"expense\")}\r\n                            className={clsx(\r\n                                \"flex-1 py-2 rounded-md text-sm font-medium transition-colors\",\r\n                                type === \"expense\" ? \"bg-red-500/20 text-red-500 shadow-sm\" : \"text-muted-foreground hover:text-foreground\"\r\n                            )}\r\n                        >\r\n                            Gasto\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setType(\"income\")}\r\n                            className={clsx(\r\n                                \"flex-1 py-2 rounded-md text-sm font-medium transition-colors\",\r\n                                type === \"income\" ? \"bg-green-500/20 text-green-500 shadow-sm\" : \"text-muted-foreground hover:text-foreground\"\r\n                            )}\r\n                        >\r\n                            Ingreso\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm text-muted-foreground\">Monto</label>\r\n                        <div className=\"relative\">\r\n                            <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground\">$</span>\r\n                            <input\r\n                                type=\"number\"\r\n                                value={amount}\r\n                                onChange={e => setAmount(e.target.value)}\r\n                                placeholder=\"0.00\"\r\n                                className=\"w-full bg-muted/50 border border-border rounded-lg py-3 pl-8 pr-4 text-2xl font-mono focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n                                required\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm text-muted-foreground\">Categoría</label>\r\n                        <select\r\n                            value={category}\r\n                            onChange={e => setCategory(e.target.value)}\r\n                            className=\"w-full bg-muted/50 border border-border rounded-lg py-3 px-4 appearance-none focus:outline-none focus:ring-2 focus:ring-primary/50 text-foreground\"\r\n                        >\r\n                            <option value=\"General\">General</option>\r\n                            <option value=\"Comida\">Comida</option>\r\n                            <option value=\"Transporte\">Transporte</option>\r\n                            <option value=\"Vivienda\">Vivienda</option>\r\n                            <option value=\"Ocio\">Ocio</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm text-muted-foreground\">Fecha</label>\r\n                        <div className=\"relative\">\r\n                            <input\r\n                                type=\"date\"\r\n                                value={date}\r\n                                onChange={e => setDate(e.target.value)}\r\n                                className=\"w-full bg-muted/50 border border-border rounded-lg py-3 pl-4 pr-10 appearance-none focus:outline-none focus:ring-2 focus:ring-primary/50 text-white fill-white\"\r\n                            />\r\n                            <CalendarIcon className=\"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none\" size={20} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm text-muted-foreground\">Nota (Opcional)</label>\r\n                        <textarea\r\n                            rows={3}\r\n                            value={note}\r\n                            onChange={e => setNote(e.target.value)}\r\n                            className=\"w-full bg-muted/50 border border-border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-primary/50\"\r\n                            placeholder=\"Detalles adicionales...\"\r\n                        />\r\n                    </div>\r\n\r\n                    <button type=\"submit\" disabled={loading} className=\"w-full bg-primary hover:bg-primary/90 text-primary-foreground py-4 rounded-lg font-bold flex items-center justify-center gap-2 mt-8 transition-colors\">\r\n                        <Save size={20} />\r\n                        {loading ? \"Guardando...\" : \"Guardar Transacción\"}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1933, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mayko/.gemini/antigravity/scratch/sikai-finance/components/AddTransactionButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Plus } from \"lucide-react\";\r\nimport TransactionForm from \"@/components/TransactionForm\";\r\n\r\nexport default function AddTransactionButton({ userId }: { userId: string }) {\r\n    const [isDrawerOpen, setIsDrawerOpen] = useState(false);\r\n\r\n    return (\r\n        <>\r\n            <button\r\n                onClick={() => setIsDrawerOpen(true)}\r\n                className=\"fixed bottom-6 right-6 h-14 w-14 rounded-full bg-primary text-primary-foreground shadow-lg shadow-primary/30 flex items-center justify-center hover:scale-110 transition-transform active:scale-95 z-40\"\r\n            >\r\n                <Plus size={32} />\r\n            </button>\r\n\r\n            <TransactionForm isOpen={isDrawerOpen} onClose={() => setIsDrawerOpen(false)} userId={userId} />\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS,qBAAqB,EAAE,MAAM,EAAsB;IACvE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,qBACI;;0BACI,8OAAC;gBACG,SAAS,IAAM,gBAAgB;gBAC/B,WAAU;0BAEV,cAAA,8OAAC,0MAAI;oBAAC,MAAM;;;;;;;;;;;0BAGhB,8OAAC,yIAAe;gBAAC,QAAQ;gBAAc,SAAS,IAAM,gBAAgB;gBAAQ,QAAQ;;;;;;;;AAGlG"}}]
}